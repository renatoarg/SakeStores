<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SakeShopContent.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">SakeStores</a> &gt; <a href="index.source.html" class="el_package">com.sakestores.feat_sake_details.ui</a> &gt; <span class="el_source">SakeShopContent.kt</span></div><h1>SakeShopContent.kt</h1><pre class="source lang-java linenums">@file:OptIn(ExperimentalSharedTransitionApi::class)

package com.sakestores.feat_sake_details.ui

import androidx.compose.animation.AnimatedVisibility
import androidx.compose.animation.AnimatedVisibilityScope
import androidx.compose.animation.ExperimentalSharedTransitionApi
import androidx.compose.animation.SharedTransitionLayout
import androidx.compose.animation.SharedTransitionScope
import androidx.compose.foundation.background
import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.verticalScroll
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.ArrowBack
import androidx.compose.material.icons.filled.LocationOn
import androidx.compose.material.icons.filled.Star
import androidx.compose.material3.Button
import androidx.compose.material3.Card
import androidx.compose.material3.CardDefaults
import androidx.compose.material3.Icon
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.OutlinedButton
import androidx.compose.material3.Surface
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.layout.ContentScale
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.tooling.preview.Preview
import androidx.compose.ui.unit.dp
import coil.compose.AsyncImage
import com.sakestores.design_system.components.NetworkImageWithLoading
import com.sakestores.design_system.theme.SakeSecondary
import com.sakestores.design_system.theme.SakeStoresTheme
import com.sakestores.domain.model.SakeShop

/**
 * Composable function that displays detailed content for a [SakeShop] within a shared transition scope.
 *
 * This layout includes:
 * - A header image with shared transition effect.
 * - Sake shop name with shared transition effect.
 * - Rating display with star icon.
 * - Description of the sake shop.
 * - Address section with location icon and coordinates.
 * - Action buttons for opening location in maps and visiting the website.
 *
 * @param sakeShop The data model representing the sake shop details to display.
 * @param modifier Optional [Modifier] for styling this composable.
 * @param onMapsClick Lambda called with the Google Maps URL when the &quot;Open in Maps&quot; button is clicked.
 * @param onWebsiteClick Lambda called with the website URL when the &quot;Visit Website&quot; button is clicked.
 * @param animatedVisibilityScope The [AnimatedVisibilityScope] used for shared transition animation.
 * @param onBackClick Lambda called when a back action is triggered (not used in the current UI).
 */
@Composable
fun SharedTransitionScope.SakeShopDetailsContent(
    sakeShop: SakeShop,
<span class="nc bnc" id="L74" title="All 2 branches missed.">    modifier: Modifier = Modifier,</span>
<span class="nc bnc" id="L75" title="All 2 branches missed.">    onMapsClick: (String) -&gt; Unit = {},</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">    onWebsiteClick: (String) -&gt; Unit = {},</span>
    animatedVisibilityScope: AnimatedVisibilityScope,
    onBackClick: () -&gt; Unit
<span class="nc bnc" id="L79" title="All 2 branches missed.">) {</span>
<span class="nc" id="L80">    Column(</span>
<span class="nc" id="L81">        modifier = modifier</span>
<span class="nc" id="L82">            .fillMaxSize()</span>
<span class="nc" id="L83">            .verticalScroll(rememberScrollState()),</span>
<span class="nc" id="L84">        verticalArrangement = Arrangement.spacedBy(16.dp)</span>
    ) {
        // Image Card
<span class="nc" id="L87">        Column(</span>
<span class="nc" id="L88">            modifier = Modifier.fillMaxWidth()</span>
        ) {
<span class="nc" id="L90">            NetworkImageWithLoading(</span>
<span class="nc" id="L91">                imageUrl = sakeShop.picture,</span>
<span class="nc" id="L92">                contentDescription = sakeShop.name,</span>
<span class="nc" id="L93">                modifier = Modifier</span>
<span class="nc" id="L94">                    .fillMaxWidth()</span>
<span class="nc" id="L95">                    .height(300.dp)</span>
<span class="nc" id="L96">                    .background(MaterialTheme.colorScheme.surfaceVariant)</span>
<span class="nc" id="L97">                    .sharedElement(</span>
<span class="nc" id="L98">                        state = rememberSharedContentState(&quot;image/${sakeShop.name}&quot;),</span>
<span class="nc" id="L99">                        animatedVisibilityScope = animatedVisibilityScope</span>
                    )
            )
<span class="nc" id="L102">            Spacer(modifier = Modifier.height(16.dp))</span>
<span class="nc" id="L103">            Text(</span>
<span class="nc" id="L104">                text = sakeShop.name,</span>
<span class="nc" id="L105">                style = MaterialTheme.typography.titleLarge,</span>
<span class="nc" id="L106">                fontWeight = FontWeight.Bold,</span>
<span class="nc" id="L107">                modifier = Modifier</span>
<span class="nc" id="L108">                    .padding(16.dp)</span>
<span class="nc" id="L109">                    .sharedElement(</span>
<span class="nc" id="L110">                        state = rememberSharedContentState(&quot;text/${sakeShop.name}&quot;),</span>
<span class="nc" id="L111">                        animatedVisibilityScope = animatedVisibilityScope</span>
                    )
            )
<span class="nc" id="L114">        }</span>

<span class="nc" id="L116">        Card(</span>
<span class="nc" id="L117">            modifier = Modifier</span>
<span class="nc" id="L118">                .fillMaxWidth()</span>
<span class="nc" id="L119">                .padding(horizontal = 16.dp),</span>
<span class="nc" id="L120">            elevation = CardDefaults.cardElevation(defaultElevation = 4.dp),</span>
<span class="nc" id="L121">        ) {</span>
<span class="nc bnc" id="L122" title="All 6 branches missed.">            Column(</span>
<span class="nc" id="L123">                modifier = Modifier.padding(16.dp),</span>
<span class="nc" id="L124">                verticalArrangement = Arrangement.spacedBy(12.dp)</span>
            ) {
<span class="nc" id="L126">                Row(</span>
<span class="nc" id="L127">                    verticalAlignment = Alignment.CenterVertically,</span>
<span class="nc" id="L128">                    horizontalArrangement = Arrangement.spacedBy(4.dp)</span>
                ) {
<span class="nc" id="L130">                    Icon(</span>
<span class="nc" id="L131">                        imageVector = Icons.Default.Star,</span>
<span class="nc" id="L132">                        contentDescription = &quot;Rating&quot;,</span>
<span class="nc" id="L133">                        tint = SakeSecondary,</span>
<span class="nc" id="L134">                        modifier = Modifier.size(30.dp)</span>
                    )
<span class="nc" id="L136">                    Text(</span>
<span class="nc" id="L137">                        text = sakeShop.rating.toString(),</span>
<span class="nc" id="L138">                        style = MaterialTheme.typography.titleMedium,</span>
<span class="nc" id="L139">                        fontWeight = FontWeight.Medium</span>
                    )
<span class="nc" id="L141">                }</span>

<span class="nc" id="L143">                Text(</span>
<span class="nc" id="L144">                    text = sakeShop.description,</span>
<span class="nc" id="L145">                    style = MaterialTheme.typography.bodyLarge,</span>
<span class="nc" id="L146">                    color = MaterialTheme.colorScheme.onSurfaceVariant</span>
                )
<span class="nc" id="L148">            }</span>
<span class="nc" id="L149">        }</span>

        // Address Card
<span class="nc" id="L152">        Card(</span>
<span class="nc" id="L153">            modifier = Modifier</span>
<span class="nc" id="L154">                .fillMaxWidth()</span>
<span class="nc" id="L155">                .padding(horizontal = 16.dp)</span>
<span class="nc" id="L156">                .clickable { onMapsClick(sakeShop.googleMapsLink) },</span>
<span class="nc" id="L157">            elevation = CardDefaults.cardElevation(defaultElevation = 4.dp),</span>
<span class="nc" id="L158">        ) {</span>
<span class="nc bnc" id="L159" title="All 6 branches missed.">            Column(</span>
<span class="nc" id="L160">                modifier = Modifier.padding(16.dp),</span>
<span class="nc" id="L161">                verticalArrangement = Arrangement.spacedBy(8.dp)</span>
            ) {
<span class="nc" id="L163">                Row(</span>
<span class="nc" id="L164">                    verticalAlignment = Alignment.CenterVertically,</span>
<span class="nc" id="L165">                    horizontalArrangement = Arrangement.spacedBy(8.dp)</span>
                ) {
<span class="nc" id="L167">                    Icon(</span>
<span class="nc" id="L168">                        imageVector = Icons.Default.LocationOn,</span>
<span class="nc" id="L169">                        contentDescription = &quot;Location&quot;,</span>
<span class="nc" id="L170">                        tint = MaterialTheme.colorScheme.primary</span>
                    )
<span class="nc" id="L172">                    Text(</span>
<span class="nc" id="L173">                        text = &quot;Address&quot;,</span>
<span class="nc" id="L174">                        style = MaterialTheme.typography.titleMedium,</span>
<span class="nc" id="L175">                        fontWeight = FontWeight.Bold</span>
                    )
<span class="nc" id="L177">                }</span>

<span class="nc" id="L179">                Text(</span>
<span class="nc" id="L180">                    text = sakeShop.address,</span>
<span class="nc" id="L181">                    style = MaterialTheme.typography.bodyMedium,</span>
<span class="nc" id="L182">                    color = MaterialTheme.colorScheme.onSurfaceVariant</span>
                )
<span class="nc" id="L184">            }</span>
<span class="nc" id="L185">        }</span>

        // Action Buttons
<span class="nc" id="L188">        Row(</span>
<span class="nc" id="L189">            modifier = Modifier</span>
<span class="nc" id="L190">                .fillMaxWidth()</span>
<span class="nc" id="L191">                .padding(horizontal = 16.dp),</span>
<span class="nc" id="L192">            horizontalArrangement = Arrangement.spacedBy(12.dp)</span>
        ) {
<span class="nc" id="L194">            OutlinedButton(</span>
<span class="nc" id="L195">                onClick = { onWebsiteClick(sakeShop.website) },</span>
<span class="nc" id="L196">                modifier = Modifier.weight(1f)</span>
            ) {
                Text(&quot;Visit Website&quot;)
            }
<span class="nc" id="L200">        }</span>
<span class="nc" id="L201">    }</span>
<span class="nc" id="L202">}</span>

/**
 * Preview of [SakeShopDetailsContent] in light theme with sample data.
 */
@OptIn(ExperimentalSharedTransitionApi::class)
@Preview(showBackground = true, backgroundColor = 0xFFFFFBF5)
@Composable
<span class="nc bnc" id="L210" title="All 6 branches missed.">private fun SakeShopDetailsContentPreview() {</span>
<span class="nc bnc" id="L211" title="All 2 branches missed.">    SakeStoresTheme {</span>
        Surface(
            modifier = Modifier.fillMaxSize(),
            color = MaterialTheme.colorScheme.background
        ) {
            SharedTransitionLayout {
                var isVisible by remember { mutableStateOf(true) }

                AnimatedVisibility(visible = isVisible) {
                    this@SharedTransitionLayout.SakeShopDetailsContent(
                        sakeShop = sampleDetailedSakeShop(),
                        modifier = Modifier.padding(16.dp),
                        onMapsClick = { println(&quot;Maps clicked: $it&quot;) },
                        onWebsiteClick = { println(&quot;Website clicked: $it&quot;) },
                        animatedVisibilityScope = this,
                        onBackClick = {  }
                    )
                }
            }
        }
    }
<span class="nc bnc" id="L232" title="All 2 branches missed.">}</span>

/**
 * Preview of [SakeShopDetailsContent] in dark theme with sample data.
 */
@OptIn(ExperimentalSharedTransitionApi::class)
@Preview(showBackground = true, backgroundColor = 0xFFFFFBF5)
@Composable
<span class="nc bnc" id="L240" title="All 6 branches missed.">private fun SakeShopDetailsContentDarkPreview() {</span>
<span class="nc bnc" id="L241" title="All 2 branches missed.">    SakeStoresTheme(darkTheme = true) {</span>
        Surface(
            modifier = Modifier.fillMaxSize(),
            color = MaterialTheme.colorScheme.background
        ) {
            SharedTransitionLayout {
                var isVisible by remember { mutableStateOf(true) }

                AnimatedVisibility(visible = isVisible) {
                    this@SharedTransitionLayout.SakeShopDetailsContent(
                        sakeShop = sampleDetailedSakeShop(),
                        modifier = Modifier.padding(16.dp),
                        onMapsClick = { println(&quot;Maps clicked: $it&quot;) },
                        onWebsiteClick = { println(&quot;Website clicked: $it&quot;) },
                        animatedVisibilityScope = this,
                        onBackClick = {}
                    )
                }
            }
        }
    }
<span class="nc bnc" id="L262" title="All 2 branches missed.">}</span>

/**
 * Preview of [SakeShopDetailsContent] with long text description and light theme.
 */
@OptIn(ExperimentalSharedTransitionApi::class)
@Preview(showBackground = true, backgroundColor = 0xFFFFFBF5, heightDp = 800)
@Composable
<span class="nc bnc" id="L270" title="All 6 branches missed.">private fun SakeShopDetailsContentLongTextPreview() {</span>
<span class="nc bnc" id="L271" title="All 2 branches missed.">    SakeStoresTheme {</span>
        Surface(
            modifier = Modifier.fillMaxSize(),
            color = MaterialTheme.colorScheme.background
        ) {
            SharedTransitionLayout {
                var isVisible by remember { mutableStateOf(true) }

                AnimatedVisibility(visible = isVisible) {
                    this@SharedTransitionLayout.SakeShopDetailsContent(
                        sakeShop = sampleDetailedSakeShopLongText(),
                        modifier = Modifier.padding(16.dp),
                        onMapsClick = { println(&quot;Maps clicked: $it&quot;) },
                        onWebsiteClick = { println(&quot;Website clicked: $it&quot;) },
                        animatedVisibilityScope = this,
                        onBackClick = {}
                    )
                }
            }
        }
    }
<span class="nc bnc" id="L292" title="All 2 branches missed.">}</span>

/**
 * Compact width preview of [SakeShopDetailsContent].
 */
@OptIn(ExperimentalSharedTransitionApi::class)
@Preview(showBackground = true, backgroundColor = 0xFFFFFBF5, widthDp = 320, heightDp = 600)
@Composable
<span class="nc bnc" id="L300" title="All 6 branches missed.">private fun SakeShopDetailsContentCompactPreview() {</span>
<span class="nc bnc" id="L301" title="All 2 branches missed.">    SakeStoresTheme {</span>
        Surface(
            modifier = Modifier.fillMaxSize(),
            color = MaterialTheme.colorScheme.background
        ) {
            SharedTransitionLayout {
                var isVisible by remember { mutableStateOf(true) }

                AnimatedVisibility(visible = isVisible) {
                    this@SharedTransitionLayout.SakeShopDetailsContent(
                        sakeShop = sampleDetailedSakeShop(),
                        modifier = Modifier.padding(8.dp),
                        onMapsClick = { println(&quot;Maps clicked: $it&quot;) },
                        onWebsiteClick = { println(&quot;Website clicked: $it&quot;) },
                        animatedVisibilityScope = this,
                        onBackClick = {}
                    )
                }
            }
        }
    }
<span class="nc bnc" id="L322" title="All 2 branches missed.">}</span>

/**
 * Provides a sample [SakeShop] instance with typical data.
 */
<span class="nc" id="L327">private fun sampleDetailedSakeShop(): SakeShop = SakeShop(</span>
<span class="nc" id="L328">    name = &quot;Sake House Tokyo&quot;,</span>
<span class="nc" id="L329">    picture = &quot;https://example.com/sakehouse.jpg&quot;,</span>
<span class="nc" id="L330">    description = &quot;Authentic sake experience from the heart of Tokyo with a wide selection and expert guidance.&quot;,</span>
<span class="nc" id="L331">    rating = 4.8f,</span>
<span class="nc" id="L332">    address = &quot;123 Tokyo Street, Tokyo, Japan&quot;,</span>
<span class="nc" id="L333">    coordinates = listOf(35.6895, 139.6917),</span>
<span class="nc" id="L334">    googleMapsLink = &quot;https://maps.google.com/?q=35.6895,139.6917&quot;,</span>
<span class="nc" id="L335">    website = &quot;https://sakehousetokyo.example.com&quot;</span>
<span class="nc" id="L336">)</span>

/**
 * Provides a sample [SakeShop] with an extended long description for testing scrolling.
 */
<span class="nc" id="L341">private fun sampleDetailedSakeShopLongText(): SakeShop = sampleDetailedSakeShop().copy(</span>
    description = &quot;&quot;&quot;
        Authentic sake experience from the heart of Tokyo with a wide selection and expert guidance.
        Our sake is sourced from the finest breweries, featuring rare and exclusive labels.
        Enjoy tasting sessions, sake pairing with traditional dishes, and cultural events hosted regularly.
        Whether you are a beginner or a connoisseur, Sake House Tokyo offers a unique and memorable journey.
        Visit us to explore the rich heritage of sake craftsmanship and modern innovations in brewing.
<span class="nc" id="L348">    &quot;&quot;&quot;.trimIndent()</span>
<span class="nc" id="L349">)</span>
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>