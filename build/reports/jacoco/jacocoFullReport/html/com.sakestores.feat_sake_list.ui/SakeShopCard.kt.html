<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SakeShopCard.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">SakeStores</a> &gt; <a href="index.source.html" class="el_package">com.sakestores.feat_sake_list.ui</a> &gt; <span class="el_source">SakeShopCard.kt</span></div><h1>SakeShopCard.kt</h1><pre class="source lang-java linenums">package com.sakestores.feat_sake_list.ui

import androidx.compose.animation.AnimatedVisibility
import androidx.compose.animation.AnimatedVisibilityScope
import androidx.compose.animation.ExperimentalSharedTransitionApi
import androidx.compose.animation.SharedTransitionLayout
import androidx.compose.animation.SharedTransitionScope
import androidx.compose.foundation.background
import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Star
import androidx.compose.material3.Divider
import androidx.compose.material3.Icon
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.text.style.TextOverflow
import androidx.compose.ui.tooling.preview.Preview
import androidx.compose.ui.unit.dp
import com.sakestores.design_system.components.NetworkImageWithLoading
import com.sakestores.design_system.theme.SakeStoresTheme
import com.sakestores.domain.model.SakeShop

/**
 * Composable displaying a card view for a single [SakeShop], including its image, name,
 * description, and rating.
 *
 * The card supports shared element transitions via [SharedTransitionScope] and
 * [AnimatedVisibilityScope] to enable smooth animations between screens.
 *
 * @param sakeShop The [SakeShop] data to display.
 * @param onClick Lambda invoked when the card is clicked.
 * @param animatedVisibilityScope The [AnimatedVisibilityScope] used for shared transition animation.
 * @param modifier [Modifier] for styling and layout adjustments.
 */
@OptIn(ExperimentalSharedTransitionApi::class)
@Composable
fun SharedTransitionScope.SakeShopCard(
    sakeShop: SakeShop,
    onClick: () -&gt; Unit,
    animatedVisibilityScope: AnimatedVisibilityScope,
    modifier: Modifier
<span class="nc bnc" id="L54" title="All 2 branches missed.">) {</span>
<span class="nc" id="L55">    Column(</span>
<span class="nc" id="L56">        modifier = modifier</span>
<span class="nc" id="L57">            .fillMaxWidth()</span>
<span class="nc" id="L58">            .clickable { onClick() },</span>
    ) {
        // Store name
<span class="nc" id="L61">        Text(</span>
<span class="nc" id="L62">            text = sakeShop.name,</span>
<span class="nc" id="L63">            style = MaterialTheme.typography.titleLarge,</span>
<span class="nc" id="L64">            fontWeight = FontWeight.Bold,</span>
<span class="nc" id="L65">            maxLines = 2,</span>
<span class="nc" id="L66">            overflow = TextOverflow.Ellipsis,</span>
<span class="nc" id="L67">            modifier = Modifier</span>
<span class="nc" id="L68">                .padding(16.dp)</span>
<span class="nc" id="L69">                .sharedElement(</span>
<span class="nc" id="L70">                    state = rememberSharedContentState(&quot;text/${sakeShop.name}&quot;),</span>
<span class="nc" id="L71">                    animatedVisibilityScope = animatedVisibilityScope</span>
                )
        )
<span class="nc" id="L74">        Column(</span>
<span class="nc" id="L75">            modifier = Modifier.padding(16.dp),</span>
<span class="nc" id="L76">            verticalArrangement = Arrangement.spacedBy(4.dp)</span>
        ) {
            // address
<span class="nc" id="L79">            Text(</span>
<span class="nc" id="L80">                text = sakeShop.address,</span>
<span class="nc" id="L81">                style = MaterialTheme.typography.bodyMedium,</span>
<span class="nc" id="L82">                color = MaterialTheme.colorScheme.onSurfaceVariant,</span>
<span class="nc" id="L83">                maxLines = 2,</span>
<span class="nc" id="L84">                overflow = TextOverflow.Ellipsis</span>
            )
            // star rating
<span class="nc" id="L87">            Row(</span>
<span class="nc" id="L88">                verticalAlignment = Alignment.CenterVertically,</span>
<span class="nc" id="L89">                horizontalArrangement = Arrangement.spacedBy(4.dp)</span>
            ) {
<span class="nc" id="L91">                Icon(</span>
<span class="nc" id="L92">                    imageVector = Icons.Default.Star,</span>
<span class="nc" id="L93">                    contentDescription = &quot;Rating&quot;,</span>
<span class="nc" id="L94">                    tint = Color(0xFFFFD700),</span>
<span class="nc" id="L95">                    modifier = Modifier.size(16.dp)</span>
                )
<span class="nc" id="L97">                Text(</span>
<span class="nc" id="L98">                    text = sakeShop.rating.toString(),</span>
<span class="nc" id="L99">                    style = MaterialTheme.typography.bodySmall,</span>
<span class="nc" id="L100">                    fontWeight = FontWeight.Medium</span>
                )
<span class="nc" id="L102">            }</span>
<span class="nc" id="L103">        }</span>
<span class="nc" id="L104">        Divider(</span>
<span class="nc" id="L105">            modifier = Modifier</span>
<span class="nc" id="L106">                .fillMaxWidth()</span>
<span class="nc" id="L107">                .height(2.dp)</span>
        )
<span class="nc" id="L109">    }</span>
<span class="nc" id="L110">}</span>

/**
 * Preview of the [SakeShopCard] composable with sample data.
 */
@OptIn(ExperimentalSharedTransitionApi::class)
@Preview(showBackground = true, backgroundColor = 0xFFFFFBF5)
@Composable
<span class="nc bnc" id="L118" title="All 6 branches missed.">private fun SakeShopCardPreview() {</span>
<span class="nc bnc" id="L119" title="All 2 branches missed.">    SakeStoresTheme {</span>
        SharedTransitionLayout {
            AnimatedVisibility(visible = true) {
                this@SharedTransitionLayout.SakeShopCard(
                    sakeShop = sampleSakeShop(),
                    onClick = {  },
                    animatedVisibilityScope = this,
                    modifier = Modifier
                )
            }
        }
    }
<span class="nc bnc" id="L131" title="All 2 branches missed.">}</span>

/**
 * Provides sample [SakeShop] data for previews and tests.
 *
 * @return Sample [SakeShop] instance.
 */
<span class="nc" id="L138">private fun sampleSakeShop() = SakeShop(</span>
<span class="nc" id="L139">    name = &quot;Sake Store Tokyo&quot;,</span>
<span class="nc" id="L140">    description = &quot;Traditional Japanese sake store with premium selections from renowned breweries across Japan.&quot;,</span>
<span class="nc" id="L141">    picture = &quot;https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&quot;,</span>
<span class="nc" id="L142">    address = &quot;123 Street&quot;,</span>
<span class="nc" id="L143">    coordinates = listOf(2.15, 4.35),</span>
<span class="nc" id="L144">    googleMapsLink = &quot;&quot;,</span>
<span class="nc" id="L145">    website = &quot;&quot;,</span>
<span class="nc" id="L146">    rating = 4.8f</span>
<span class="nc" id="L147">)</span>
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>